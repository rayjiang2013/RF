<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="HL_API_Help.xml" data-mc-path-to-help-system="../../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="Appendix|IxNetwork (only) Examples|PYTHON_Samples">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link href="../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" />
        <link href="../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" /><title>DHCPv4oL2TP Client Server (DHCPv4oL2TP_client_server.py)</title>
        <link href="../../../Resources/Stylesheets/Advanced_Information_Manager.css" rel="stylesheet" type="text/css" />
        <script src="../../../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../../../Resources/Scripts/plugins.min.js" type="text/javascript">
        </script>
        <script src="../../../../Resources/Scripts/require.min.js" type="text/javascript">
        </script>
        <script src="../../../../Resources/Scripts/require.config.js" type="text/javascript">
        </script>
        <script src="../../../../Resources/Scripts/MadCapAll.js" type="text/javascript">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop"><a href="../../../../HL_API_Help.htm#HLTAPI/HLTAPI Examples/IxNetwork (only) Examples/DHCPv4oL2TP_client_server.htm">Open topic with navigation</a>
        </p>
        <h3>DHCPv4oL2TP Client Server (DHCPv4oL2TP_client_server.py)</h3>
        <p class="CodeBlock">################################################################################</p>
        <p class="CodeBlock">#                                                                              #</p>
        <p class="CodeBlock"># Description:                                                                 #</p>
        <p class="CodeBlock"># This script configures a scenario with 2 topologies:		                   #</p>
        <p class="CodeBlock">#        - Topology 1 with LAC and DHCPv6 Client							   #</p>
        <p class="CodeBlock">#        - Topology 2 with LNS and DHCPv6 Server 							   #</p>
        <p class="CodeBlock"># The script does:										                       #</p>
        <p class="CodeBlock">#    	 - start/stop protocol												   #</p>
        <p class="CodeBlock">#		 - collect and display DHCP statistics       						   #</p>
        <p class="CodeBlock">#																			   #</p>
        <p class="CodeBlock"># Module:                                                                      #</p>
        <p class="CodeBlock">#    The sample was tested on a 10GE LSM XM3 module.                           #</p>
        <p class="CodeBlock">#                                                                              #</p>
        <p class="CodeBlock">################################################################################</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">import sys, os</p>
        <p class="CodeBlock">import time, re</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock"># Append paths to python APIs</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock"># sys.path.append('/path/to/hltapi/library/common/ixiangpf/python')</p>
        <p class="CodeBlock"># sys.path.append('/path/to/ixnetwork/api/python')</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">from ixiatcl import IxiaTcl</p>
        <p class="CodeBlock">from ixiahlt import IxiaHlt</p>
        <p class="CodeBlock">from ixiangpf import IxiaNgpf</p>
        <p class="CodeBlock">from ixiaerror import IxiaError</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">ixiatcl = IxiaTcl()</p>
        <p class="CodeBlock">ixiahlt = IxiaHlt(ixiatcl)</p>
        <p class="CodeBlock">ixiangpf = IxiaNgpf(ixiahlt)</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">try:</p>
        <p class="CodeBlock" style="margin-left: 25px;">ixnHLT_errorHandler('', {})</p>
        <p class="CodeBlock">except (NameError,):</p>
        <p class="CodeBlock" style="margin-left: 25px;">def ixnHLT_errorHandler(cmd, retval):</p>
        <p class="CodeBlock" style="margin-left: 50px;">global ixiatcl</p>
        <p class="CodeBlock" style="margin-left: 50px;">err = ixiatcl.tcl_error_info()</p>
        <p class="CodeBlock" style="margin-left: 50px;">log = retval['log']</p>
        <p class="CodeBlock" style="margin-left: 50px;">additional_info = '&gt; command: %s\n&gt; tcl errorInfo: %s\n&gt; log: %s' % (cmd, err, log)</p>
        <p class="CodeBlock" style="margin-left: 50px;">raise IxiaError(IxiaError.COMMAND_FAIL, additional_info)</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">def printDict(obj, nested_level=0, output=sys.stdout):</p>
        <p class="CodeBlock" style="margin-left: 25px;">spacing = '   '</p>
        <p class="CodeBlock" style="margin-left: 25px;">if type(obj) == dict:</p>
        <p class="CodeBlock" style="margin-left: 50px;">print &gt;&gt; output, '%s' % ((nested_level) * spacing)</p>
        <p class="CodeBlock" style="margin-left: 50px;">for k, v in obj.items():</p>
        <p class="CodeBlock" style="margin-left: 75px;">if hasattr(v, '__iter__'):</p>
        <p class="CodeBlock" style="margin-left: 100px;">print &gt;&gt; output, '%s%s:' % ((nested_level + 1) * spacing, k)</p>
        <p class="CodeBlock" style="margin-left: 100px;">printDict(v, nested_level + 1, output)</p>
        <p class="CodeBlock" style="margin-left: 75px;">else:</p>
        <p class="CodeBlock" style="margin-left: 100px;">print &gt;&gt; output, '%s%s: %s' % ((nested_level + 1) * spacing, k, v)</p>
        <p class="CodeBlock" style="margin-left: 50px;">print &gt;&gt; output, '%s' % (nested_level * spacing)</p>
        <p class="CodeBlock" style="margin-left: 25px;">elif type(obj) == list:</p>
        <p class="CodeBlock" style="margin-left: 50px;">print &gt;&gt; output, '%s[' % ((nested_level) * spacing)</p>
        <p class="CodeBlock" style="margin-left: 50px;">for v in obj:</p>
        <p class="CodeBlock" style="margin-left: 75px;">if hasattr(v, '__iter__'):</p>
        <p class="CodeBlock" style="margin-left: 100px;">printDict(v, nested_level + 1, output)</p>
        <p class="CodeBlock" style="margin-left: 75px;">else:</p>
        <p class="CodeBlock" style="margin-left: 100px;">print &gt;&gt; output, '%s%s' % ((nested_level + 1) * spacing, v)</p>
        <p class="CodeBlock" style="margin-left: 50px;">print &gt;&gt; output, '%s]' % ((nested_level) * spacing)</p>
        <p class="CodeBlock" style="margin-left: 25px;">else:</p>
        <p class="CodeBlock" style="margin-left: 50px;">print &gt;&gt; output, '%s%s' % (nested_level * spacing, obj)</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">chassis_ip              = '10.205.15.184'</p>
        <p class="CodeBlock">ixnetwork_tcl_server    = 'localhost'</p>
        <p class="CodeBlock">port_list               = '9/1 9/9'</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">#  #############################################################################</p>
        <p class="CodeBlock"># 								CONNECT AND PORT HANDLES</p>
        <p class="CodeBlock">#  #############################################################################</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">print('\n\nConnect to IxNetwork Tcl Server and get port handles...\n\n')</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">connect_status = ixiangpf.connect(</p>
        <p class="CodeBlock" style="margin-left: 25px;">reset                  = 1,</p>
        <p class="CodeBlock" style="margin-left: 25px;">device                 = chassis_ip,</p>
        <p class="CodeBlock" style="margin-left: 25px;">port_list              = port_list,</p>
        <p class="CodeBlock" style="margin-left: 25px;">ixnetwork_tcl_server   = ixnetwork_tcl_server,</p>
        <p class="CodeBlock" style="margin-left: 25px;">tcl_server             = chassis_ip,</p>
        <p class="CodeBlock">)</p>
        <p class="CodeBlock">if connect_status['status'] != IxiaHlt.SUCCESS:</p>
        <p class="CodeBlock" style="margin-left: 25px;">ixnHLT_errorHandler('connect', connect_status)</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">port_handle = connect_status['vport_list']</p>
        <p class="CodeBlock">port_0 = port_handle.split(' ')[0]</p>
        <p class="CodeBlock">port_1 = port_handle.split(' ')[1]</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock"># #############################################################################</p>
        <p class="CodeBlock"># 					Create a topology and a device group for LAC</p>
        <p class="CodeBlock"># #############################################################################</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">topology_status = ixiangpf.topology_config (</p>
        <p class="CodeBlock" style="margin-left: 25px;">topology_name           = 'LAC 1',</p>
        <p class="CodeBlock" style="margin-left: 25px;">port_handle				= port_1,</p>
        <p class="CodeBlock" style="margin-left: 25px;">device_group_multiplier	= 10,</p>
        <p class="CodeBlock" style="margin-left: 25px;">device_group_name       = 'LAC DG 1',</p>
        <p class="CodeBlock" style="margin-left: 25px;">device_group_enabled    = 1,</p>
        <p class="CodeBlock">)</p>
        <p class="CodeBlock">if topology_status['status'] != IxiaHlt.SUCCESS:</p>
        <p class="CodeBlock" style="margin-left: 25px;">ixnHLT_errorHandler('topology_config', topology_status)</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">dg_handle_1 = topology_status['device_group_handle']</p>
        <p class="CodeBlock">topology_handle_1 = topology_status['topology_handle']</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">mac_start		= "0000.0005.0001"</p>
        <p class="CodeBlock">mac_step		= "0000.0000.1000"</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">interface_status = ixiangpf.interface_config (</p>
        <p class="CodeBlock" style="margin-left: 25px;">protocol_handle			= dg_handle_1,</p>
        <p class="CodeBlock" style="margin-left: 25px;">src_mac_addr       		= mac_start,</p>
        <p class="CodeBlock" style="margin-left: 25px;">src_mac_addr_step		= mac_step,</p>
        <p class="CodeBlock">)</p>
        <p class="CodeBlock">if interface_status['status'] != IxiaHlt.SUCCESS:</p>
        <p class="CodeBlock" style="margin-left: 25px;">ixnHLT_errorHandler('interface_config', interface_status)</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">ethernet_handle_1 = interface_status['ethernet_handle']</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock"># #############################################################################</p>
        <p class="CodeBlock"># 							LAC Stack</p>
        <p class="CodeBlock"># #############################################################################</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">tunnel_count   			=  '1'</p>
        <p class="CodeBlock">sessions_per_tunnel 	=  '10'</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">LAC_status = ixiangpf.l2tp_config (</p>
        <p class="CodeBlock" style="margin-left: 25px;">mode                               = 'lac'                             ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">handle                             = ethernet_handle_1              ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">action                             = 'create'                          ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">sessions_per_tunnel                = sessions_per_tunnel            ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">num_tunnels                        = tunnel_count                   ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">l2tp_dst_addr                      = '12.70.1.1'                       ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">l2tp_dst_step                      = '0.0.0.1'                         ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">l2tp_src_gw                		   = '0.0.0.0'               			,</p>
        <p class="CodeBlock" style="margin-left: 25px;">l2tp_src_prefix_len            	   = '16'                    			,</p>
        <p class="CodeBlock" style="margin-left: 25px;">l2tp_src_addr                      = '12.70.0.1'                       ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">l2tp_src_count                     = tunnel_count                   ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">l2tp_src_step                      = '0.0.0.1'                         ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">enable_term_req_timeout            = '0'                               ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">udp_src_port                       = '1600'                            ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">udp_dst_port                       = '1800'                            ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">redial_timeout                     = '13'                              ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">rws                                = '15'                              ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">offset_len                         = '16'                              ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">max_ctrl_timeout                   = '9'                               ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">redial_max                         = '2048'                            ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">hostname                           = 'ixia_dut'                      ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">secret                             = 'ixia_secret'                   ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">hostname_wc                        = '1'                               ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">secret_wc                          = '1'                               ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">wildcard_bang_start                = '1'                               ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">wildcard_bang_end                  = sessions_per_tunnel            ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">wildcard_dollar_start              = '1'                               ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">wildcard_dollar_end                = tunnel_count                   ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">username                           = 'ixia_#_?'                      ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">password                           = 'pwd_#_?'                       ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">username_wc                        = '1'                               ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">password_wc                        = '1'                               ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">wildcard_pound_start               = '1'                               ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">wildcard_pound_end                 = tunnel_count                   ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">wildcard_question_start            = '1'                               ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">wildcard_question_end              = sessions_per_tunnel            ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">init_ctrl_timeout                  = '6'                               ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">hello_interval                     = '101'                             ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">framing_capability                 = 'async'                           ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">ctrl_retries                       = '11'                              ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">bearer_type                        = 'digital'                         ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">bearer_capability                  = 'digital'                         ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">enable_mru_negotiation             = '1'                               ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">desired_mru_rate                   = '1501'                            ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">lcp_enable_accm                    = '1'                               ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">lcp_accm                           = '1501'                            ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">max_auth_req                       = '15'                              ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">auth_req_timeout                   = '7'                               ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">auth_mode                          = 'pap_or_chap'                     ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">chap_name                          = 'ixia_chap_name'                  ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">chap_secret                        = 'ixia_chap_secret'                ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">client_dns_options                 = 'request_primary_and_secondary'   ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">ppp_client_ip                      = '3.3.3.3'                         ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">ppp_client_step                    = '0.0.0.2'                         ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">ppp_client_iid                     = '00:44:44:44:00:00:00:01'         ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">client_ipv4_ncp_configuration      = 'request'                         ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">client_netmask                     = '255.255.0.0'                     ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">client_netmask_options             = 'request_specific_netmask'        ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">client_ipv6_ncp_configuration      = 'request'                         ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">client_wins_options                = 'request_primaryandsecondary_wins',</p>
        <p class="CodeBlock" style="margin-left: 25px;">client_wins_primary_address        = '88.88.88.88'                     ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">client_wins_secondary_address      = '99.99.99.99'                     ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">enable_domain_groups               = '1'                               ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">echo_req                           = '1'                               ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">echo_req_interval                  = '9'                               ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">echo_rsp                           = '1'                               ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">max_configure_req                  = '8'                               ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">max_terminate_req                  = '6'                               ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">config_req_timeout                 = '25'                              ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">protocol_name                      = 'Ixia LAC'                      ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">max_ipcp_req                       = '12'                              ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">ipcp_req_timeout                   = '13'                              ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">ip_cp                              = 'dual_stack'                      ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">client_primary_dns_address         = '5.5.5.5'                         ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">client_secondary_dns_address       = '6.6.6.6'                         ,</p>
        <p class="CodeBlock">)</p>
        <p class="CodeBlock">if LAC_status['status'] != IxiaHlt.SUCCESS:</p>
        <p class="CodeBlock" style="margin-left: 25px;">ixnHLT_errorHandler('l2tp_config', LAC_status)</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">pppox_1_handle = LAC_status['pppox_client_handle']</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock"># #############################################################################</p>
        <p class="CodeBlock"># 						  DHCPv6 Client Stack</p>
        <p class="CodeBlock"># #############################################################################</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">dhcp_config_for_lac = ixiangpf.emulation_dhcp_group_config    (</p>
        <p class="CodeBlock" style="margin-left: 25px;">handle                      	= pppox_1_handle         ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">mode                    		= 'create'        ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">dhcp_range_ip_type              = 'ipv6'        ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">dhcp6_range_duid_enterprise_id  = '15'        ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">dhcp6_range_duid_type           = 'duid_en'        ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">dhcp6_range_duid_vendor_id      = '20'        ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">dhcp6_range_duid_vendor_id_increment    = '2'        ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">dhcp_range_renew_timer          = '10'        ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">dhcp6_use_pd_global_address     = '1'        ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">protocol_name                	= 'Ixia DHCPv6'    ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">dhcp6_range_ia_type        		= 'iana_iapd'        ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">dhcp6_range_ia_t2            	= '40000'        ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">dhcp6_range_ia_t1            	= '30000'        ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">dhcp6_range_ia_id_increment     = '2'        ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">dhcp6_range_ia_id            	= '20'        ,</p>
        <p class="CodeBlock">)</p>
        <p class="CodeBlock">if dhcp_config_for_lac['status'] != IxiaHlt.SUCCESS:</p>
        <p class="CodeBlock" style="margin-left: 25px;">ixnHLT_errorHandler('emulation_dhcp_group_config', dhcp_config_for_lac)</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">dhcpclient_1_handle = dhcp_config_for_lac['dhcpv6client_handle']</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock"># #############################################################################</p>
        <p class="CodeBlock"># 				Create a topology and a device group for LNS</p>
        <p class="CodeBlock"># #############################################################################</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">topology_status_2 = ixiangpf.topology_config (</p>
        <p class="CodeBlock" style="margin-left: 25px;">topology_name           = 'LNS 1',</p>
        <p class="CodeBlock" style="margin-left: 25px;">port_handle				= port_0,</p>
        <p class="CodeBlock" style="margin-left: 25px;">device_group_multiplier	= 10,</p>
        <p class="CodeBlock" style="margin-left: 25px;">device_group_name       = 'LNS DG 1',</p>
        <p class="CodeBlock" style="margin-left: 25px;">device_group_enabled    = 1,</p>
        <p class="CodeBlock">)</p>
        <p class="CodeBlock">if topology_status_2['status'] != IxiaHlt.SUCCESS:</p>
        <p class="CodeBlock" style="margin-left: 25px;">ixnHLT_errorHandler('topology_config', topology_status_2)</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">dg_handle_2 = topology_status_2['device_group_handle']</p>
        <p class="CodeBlock">topology_handle_2 = topology_status_2['topology_handle']</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">mac_start		= "0000.0065.0001"</p>
        <p class="CodeBlock">mac_step		= "0000.0000.1000"</p>
        <p class="CodeBlock">command_status = ixiangpf.interface_config (</p>
        <p class="CodeBlock" style="margin-left: 25px;">protocol_handle			= dg_handle_2,</p>
        <p class="CodeBlock" style="margin-left: 25px;">src_mac_addr       		= mac_start,</p>
        <p class="CodeBlock" style="margin-left: 25px;">src_mac_addr_step		= mac_step,</p>
        <p class="CodeBlock">)</p>
        <p class="CodeBlock">if command_status['status'] != IxiaHlt.SUCCESS:</p>
        <p class="CodeBlock" style="margin-left: 25px;">ixnHLT_errorHandler('interface_config', command_status)</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">ethernet_handle_2 = command_status['ethernet_handle']</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock"># #############################################################################</p>
        <p class="CodeBlock"># 							LNS Stack</p>
        <p class="CodeBlock"># #############################################################################</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">tunnel_count        = '10'</p>
        <p class="CodeBlock">sessions_per_tunnel = '50'</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">LNS_status = ixiangpf.l2tp_config (</p>
        <p class="CodeBlock" style="margin-left: 25px;">mode                          	= 'lns'                             ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">handle                          = ethernet_handle_2           ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">protocol_name                	= 'L2TP Network Server'        ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">action                          = 'create'                          ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">num_tunnels                     = tunnel_count                   ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">sessions_per_tunnel             = sessions_per_tunnel            ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">l2tp_src_addr                   = '12.70.1.1'                       ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">l2tp_src_count                  =    tunnel_count                   ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">l2tp_src_gw                  = '0.0.0.0'                ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">l2tp_src_step                =       '0.0.0.1'                         ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">l2tp_src_prefix_len            = '16'                    ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">enable_term_req_timeout          =   '0'                               ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">username                           = 'ixia_lns_user'                   ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">password                           = 'ixia_lns_pass'                   ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">chap_name                          = 'ixia_chap_name'                  ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">chap_secret                        = 'ixia_chap_secret'                ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">enable_domain_groups               = '1'                               ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">udp_src_port                       = '1800'                            ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">udp_dst_port                       = '1600'                            ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">redial_timeout                     = '13'                              ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">rws                                = '15'                              ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">offset_len                         = '16'                              ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">max_ctrl_timeout                   = '9'                               ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">redial_max                         = '2048'                            ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">secret                             = 'ixia_secret'                     ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">hostname                           = 'ixia_dut'                        ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">init_ctrl_timeout                  = '6'                               ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">hello_interval                     = '101'                             ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">framing_capability                 = 'async'                           ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">ctrl_retries                       = '11'                              ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">bearer_type                        = 'digital'                         ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">bearer_capability                  = 'digital'                         ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">accept_any_auth_value              = '1'                               ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">max_auth_req                       = '121'                             ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">auth_req_timeout                   = '132'                             ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">auth_mode                          = 'pap_or_chap'                     ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">ppp_client_iid                     = '00:55:55:55:00:00:00:01'         ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">ppp_client_iid_step                = '00:00:00:00:00:00:00:01'         ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">ppp_client_ip                      = '22.22.22.1'                      ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">ppp_client_step                    = '0.0.0.3'                         ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">dns_server_list                    = '100:0:0:1:0:0:0:0'               ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">echo_req_interval                  = '17'                              ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">send_dns_options                   = '1'                               ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">echo_req                           = '1'                               ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">echo_rsp                           = '1'                               ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">ipv6_pool_addr_prefix_len          = '90'                              ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">ipv6_pool_prefix                   = '1:1:1:1:1:1:1:1'                 ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">ipv6_pool_prefix_len               = '72'                              ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">lcp_accm                           = '234'                             ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">lcp_enable_accm                    = '1'                               ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">max_configure_req                  = '111'                             ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">max_terminate_req                  = '120'                             ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">config_req_timeout                 = '55'                              ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">enable_mru_negotiation             = '1'                               ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">desired_mru_rate                   = '1501'                            ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">max_ipcp_req                       = '14'                              ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">ipcp_req_timeout                   = '15'                              ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">ip_cp                              = 'dual_stack'                      ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">ppp_server_iid                     = '00:66:66:66:00:00:00:01'         ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">ppp_server_ip                      = '45.45.45.1'                      ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">server_dns_options                 = 'supply_primary_and_secondary'    ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">ppp_local_iid_step                 = '3'                               ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">ppp_local_ip_step                  = '0.0.15.15'                       ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">server_ipv4_ncp_configuration      = 'clientmay'                       ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">server_netmask                     = '255.255.255.128'                 ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">server_netmask_options             = 'supply_netmask'                  ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">server_primary_dns_address         = '12.12.12.1'                      ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">server_secondary_dns_address       = '13.13.13.1'                      ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">server_ipv6_ncp_configuration      = 'clientmay'                       ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">server_wins_options                = 'supply_primary_and_secondary'    ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">server_wins_primary_address        = '21.21.21.1'                      ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">server_wins_secondary_address      = '31.31.31.1'                      ,</p>
        <p class="CodeBlock">)</p>
        <p class="CodeBlock">if LNS_status['status'] != IxiaHlt.SUCCESS:</p>
        <p class="CodeBlock" style="margin-left: 25px;">ixnHLT_errorHandler('l2tp_config', LNS_status)</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">pppox_2_handle = LNS_status['pppox_server_handle']</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">dhcp_server_config_for_lns = ixiangpf.emulation_dhcp_server_config  (</p>
        <p class="CodeBlock" style="margin-left: 25px;">handle                             = pppox_2_handle            ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">mode                    		   = 'create'                ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">dhcp6_ia_type                      = 'iana_iapd'                ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">protocol_name                      = 'Ixia DHCPv6 Server'        ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">ip_dns1                            = '11:0:0:0:0:0:0:1'            ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">ip_dns2                            = '22:0:0:0:0:0:0:1'            ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">ip_version                         = '6'                    ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">ipaddress_count                    = '1'                    ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">ipaddress_pool                     = '5:a::1'                ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">ipaddress_pool_prefix_length       = '64'                    ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">lease_time                         = '86400'                ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">pool_address_increment             = '0:0:0:0:0:0:0:1'            ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">start_pool_prefix                  = '55:aa::'                ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">pool_prefix_increment              = '1:0:0:0:0:0:0:0'            ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">pool_prefix_size                   = '1'                    ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">prefix_length                      = '64'                    ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">custom_renew_time                  = '34560'                              ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">custom_rebind_time                 = '55296'                              ,</p>
        <p class="CodeBlock" style="margin-left: 25px;">use_custom_times                   = '1'                                  ,</p>
        <p class="CodeBlock">)</p>
        <p class="CodeBlock">if dhcp_server_config_for_lns['status'] != IxiaHlt.SUCCESS:</p>
        <p class="CodeBlock" style="margin-left: 25px;">ixnHLT_errorHandler('emulation_dhcp_server_config', dhcp_server_config_for_lns)</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">dhcp_server_1_handle = dhcp_server_config_for_lns['dhcpv6server_handle']</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">time.sleep(3)</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock"># ###########################################################################</p>
        <p class="CodeBlock"># 								START PROTOCOLS</p>
        <p class="CodeBlock"># ###########################################################################</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">start_servers = ixiangpf.test_control(</p>
        <p class="CodeBlock" style="margin-left: 25px;">action	=	'start_protocol',</p>
        <p class="CodeBlock" style="margin-left: 25px;">handle	=	dhcp_server_1_handle,</p>
        <p class="CodeBlock">)</p>
        <p class="CodeBlock">if start_servers['status'] != IxiaHlt.SUCCESS:</p>
        <p class="CodeBlock" style="margin-left: 25px;">ixnHLT_errorHandler('test_control', start_servers)</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">time.sleep(10)</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">start_clients = ixiangpf.test_control(</p>
        <p class="CodeBlock" style="margin-left: 25px;">action	=	'start_protocol',</p>
        <p class="CodeBlock" style="margin-left: 25px;">handle	=	dhcpclient_1_handle,</p>
        <p class="CodeBlock">)</p>
        <p class="CodeBlock">if start_clients['status'] != IxiaHlt.SUCCESS:</p>
        <p class="CodeBlock" style="margin-left: 25px;">ixnHLT_errorHandler('test_control', start_clients)</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">time.sleep(20)</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock"># ###########################################################################</p>
        <p class="CodeBlock"># 								COLLECT STATS</p>
        <p class="CodeBlock"># ###########################################################################</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">server_status = ixiangpf.emulation_dhcp_server_stats(</p>
        <p class="CodeBlock" style="margin-left: 25px;">dhcp_handle			=	dhcp_server_1_handle,</p>
        <p class="CodeBlock" style="margin-left: 25px;">action				=	'collect',</p>
        <p class="CodeBlock" style="margin-left: 25px;">execution_timeout	=	'60',</p>
        <p class="CodeBlock">)</p>
        <p class="CodeBlock">if server_status['status'] != IxiaHlt.SUCCESS:</p>
        <p class="CodeBlock" style="margin-left: 25px;">ixnHLT_errorHandler('emulation_dhcp_server_stats', server_status)</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">print "\nThe returned DHCPv4 server statistics are:\n"</p>
        <p class="CodeBlock">print "\n"</p>
        <p class="CodeBlock">printDict(server_status)</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">client_status = ixiangpf.emulation_dhcp_stats(</p>
        <p class="CodeBlock" style="margin-left: 25px;">handle				=	dhcpclient_1_handle,</p>
        <p class="CodeBlock" style="margin-left: 25px;">mode				=	'aggregate_stats',</p>
        <p class="CodeBlock" style="margin-left: 25px;">dhcp_version		=	'dhcp6',</p>
        <p class="CodeBlock" style="margin-left: 25px;">execution_timeout	=	'60',</p>
        <p class="CodeBlock">)</p>
        <p class="CodeBlock">if client_status['status'] != IxiaHlt.SUCCESS:</p>
        <p class="CodeBlock" style="margin-left: 25px;">ixnHLT_errorHandler('emulation_dhcp_stats', client_status)</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">print "\nThe aggragted DHCPv4 client statistics are:\n"</p>
        <p class="CodeBlock">print "\n"</p>
        <p class="CodeBlock">printDict(client_status)</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock"># ###########################################################################</p>
        <p class="CodeBlock"># 								CLEANUP SESSION</p>
        <p class="CodeBlock"># ###########################################################################</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">cleanup_status = ixiangpf.cleanup_session(reset='1')</p>
        <p class="CodeBlock">if cleanup_status['status'] != IxiaHlt.SUCCESS:</p>
        <p class="CodeBlock" style="margin-left: 25px;">ixnHLT_errorHandler('cleanup_session', cleanup_status)</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">print('\n\nIxNetwork session is closed...\n\n')</p>
        <p class="CodeBlock">print('!!! TEST is PASSED !!!')</p>
    </body>
</html>