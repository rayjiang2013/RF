<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="HL_API_Help.xml" data-mc-path-to-help-system="../../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="Appendix|IxNetwork (only) Examples|TCL_Samples">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link href="../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" />
        <link href="../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" /><title>BGP (BGP_L2_VPN_sites.tcl)</title>
        <script src="../../../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../../../Resources/Scripts/plugins.min.js" type="text/javascript">
        </script>
        <script src="../../../../Resources/Scripts/require.min.js" type="text/javascript">
        </script>
        <script src="../../../../Resources/Scripts/require.config.js" type="text/javascript">
        </script>
        <script src="../../../../Resources/Scripts/MadCapAll.js" type="text/javascript">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop"><a href="../../../../HL_API_Help.htm#HLTAPI/HLTAPI Examples/IxNetwork (only) Examples/DHCPv6oL2TP_LAC_statistics.htm">Open topic with navigation</a>
        </p>
        <h3>DHCPv6oL2TP LAC Stats (DHCPv6oL2TP_LAC_statistics.tcl)</h3>
        <p class="CodeBlock">################################################################################</p>
        <p class="CodeBlock">#</p>
        <p class="CodeBlock"># Description: #</p>
        <p class="CodeBlock"># This script configures a scenario with 2 topologies: #</p>
        <p class="CodeBlock">#- Topology 1 with DHCPv6 Client behind L2TP Access Concentrator #</p>
        <p class="CodeBlock">#- Topology 2 With DHCPv6 Server over L2TP Network Server#</p>
        <p class="CodeBlock">The script does the following operations for LAC:</p>
        <p class="CodeBlock">#- creates topologies and retrive specific DHCP over PPP#</p>
        <p class="CodeBlock">#statistics and protocol info.</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock"># Module: #</p>
        <p class="CodeBlock"># The sample was tested on a 10GE LSM XM3 module. #</p>
        <p class="CodeBlock">#</p>
        <p class="CodeBlock">################################################################################</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">set PASSED 0</p>
        <p class="CodeBlock">set FAILED 1</p>
        <p class="CodeBlock">if {[catch {package require Ixia} retCode]} {</p>
        <p class="CodeBlock">puts "FAIL - [info script] - $retCode"</p>
        <p class="CodeBlock">return $FAILED</p>
        <p class="CodeBlock">}</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">set port1 						1/7</p>
        <p class="CodeBlock">set port2 						1/8</p>
        <p class="CodeBlock">set test_name                   [info script]</p>
        <p class="CodeBlock">set chassis_ip                  10.205.15.75</p>
        <p class="CodeBlock">set ixnetwork_tcl_server        localhost</p>
        <p class="CodeBlock">set port_list                   [list $port1 $port2]</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">set connect_status [::ixiangpf::connect                         \</p>
        <p class="CodeBlock">-reset         1                                             \</p>
        <p class="CodeBlock">-device                 $chassis_ip                         \</p>
        <p class="CodeBlock">-port_list              $port_list                          \</p>
        <p class="CodeBlock">-ixnetwork_tcl_server   $ixnetwork_tcl_server               \</p>
        <p class="CodeBlock">]</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">ixNet setSessionParameter setAttribute loose</p>
        <p class="CodeBlock">ixNet commit</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">set port_1 [keylget connect_status port_handle.$chassis_ip.[lindex $port_list 0]]</p>
        <p class="CodeBlock">set port_2 [keylget connect_status port_handle.$chassis_ip.[lindex $port_list 1]]</p>
        <p class="CodeBlock">set port_handle [list $port_1 $port_2]</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">puts "Connected..."</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock"># ######################## Topology 1 ############################</p>
        <p class="CodeBlock">puts ""</p>
        <p class="CodeBlock">puts "Creating topology..."</p>
        <p class="CodeBlock">set topology_1_status [::ixiangpf::topology_config     \</p>
        <p class="CodeBlock">-topology_name      {Topology 1}            \</p>
        <p class="CodeBlock">-port_handle        $port_1                  \</p>
        <p class="CodeBlock">]</p>
        <p class="CodeBlock">if {[keylget topology_1_status status] != $::SUCCESS} {</p>
        <p class="CodeBlock">return $FAILED</p>
        <p class="CodeBlock">}</p>
        <p class="CodeBlock">set topology_1_handle [keylget topology_1_status topology_handle]</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock"># ######################## DG 1 ############################</p>
        <p class="CodeBlock">sleep 5</p>
        <p class="CodeBlock">puts ""</p>
        <p class="CodeBlock">puts "Creating DG 1..."</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">set device_group_1_status [::ixiangpf::topology_config \</p>
        <p class="CodeBlock">-topology_handle              $topology_1_handle      \</p>
        <p class="CodeBlock">-device_group_name            {Device Group 1}        \</p>
        <p class="CodeBlock">-device_group_multiplier      10                       \</p>
        <p class="CodeBlock">-device_group_enabled         1                       \</p>
        <p class="CodeBlock">]</p>
        <p class="CodeBlock">if {[keylget device_group_1_status status] != $::SUCCESS} {</p>
        <p class="CodeBlock">puts "FAIL - [info script] - $device_group_1_status"</p>
        <p class="CodeBlock">return $FAILED</p>
        <p class="CodeBlock">}</p>
        <p class="CodeBlock">set deviceGroup_1_handle [keylget device_group_1_status device_group_handle]</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">set multivalue_1_status [::ixiangpf::multivalue_config             \</p>
        <p class="CodeBlock">-pattern                counter                         \</p>
        <p class="CodeBlock">-counter_start          00.15.01.00.00.01               \</p>
        <p class="CodeBlock">-counter_step           00.00.00.00.00.01               \</p>
        <p class="CodeBlock">-counter_direction      increment                       \</p>
        <p class="CodeBlock">-nest_step              00.00.01.00.00.00               \</p>
        <p class="CodeBlock">-nest_owner             $topology_1_handle              \</p>
        <p class="CodeBlock">-nest_enabled           0                               \</p>
        <p class="CodeBlock">]</p>
        <p class="CodeBlock">if {[keylget multivalue_1_status status] != $::SUCCESS} {</p>
        <p class="CodeBlock">puts "FAIL - [info script] - $multivalue_1_status"</p>
        <p class="CodeBlock">return $FAILED</p>
        <p class="CodeBlock">}</p>
        <p class="CodeBlock">set multivalue_1_handle [keylget multivalue_1_status multivalue_handle]</p>
        <p class="CodeBlock">sleep 5</p>
        <p class="CodeBlock">puts ""</p>
        <p class="CodeBlock">puts "Creating Ethernet 1 layer..."</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">set ethernet_1_status [::ixiangpf::interface_config \</p>
        <p class="CodeBlock">-protocol_name                {Ethernet 1}               \</p>
        <p class="CodeBlock">-protocol_handle              $deviceGroup_1_handle      \</p>
        <p class="CodeBlock">-mtu                          1500                       \</p>
        <p class="CodeBlock">-src_mac_addr                 $multivalue_1_handle       \</p>
        <p class="CodeBlock">-vlan                         0                          \</p>
        <p class="CodeBlock">-vlan_id                      1                          \</p>
        <p class="CodeBlock">-vlan_id_step                 0                          \</p>
        <p class="CodeBlock">-vlan_id_count                1                          \</p>
        <p class="CodeBlock">-vlan_tpid                    0x8100                     \</p>
        <p class="CodeBlock">-vlan_user_priority           0                          \</p>
        <p class="CodeBlock">-vlan_user_priority_step      0                          \</p>
        <p class="CodeBlock">-use_vpn_parameters           0                          \</p>
        <p class="CodeBlock">-site_id                      0                          \</p>
        <p class="CodeBlock">]</p>
        <p class="CodeBlock">if {[keylget ethernet_1_status status] != $::SUCCESS} {</p>
        <p class="CodeBlock">puts "FAIL - [info script] - $ethernet_1_status"</p>
        <p class="CodeBlock">return $FAILED</p>
        <p class="CodeBlock">}</p>
        <p class="CodeBlock">set ethernet_1_handle [keylget ethernet_1_status ethernet_handle]</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock"># ################## L2TP Access Concentrator ###############</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">puts "Adding L2TP Access Concentrator..."</p>
        <p class="CodeBlock">set tunnel_count        1</p>
        <p class="CodeBlock">set sessions_per_tunnel 10</p>
        <p class="CodeBlock">set mv_custom_distribution [::ixiangpf::multivalue_config \</p>
        <p class="CodeBlock">-mode                   create           \</p>
        <p class="CodeBlock">-pattern                string           \</p>
        <p class="CodeBlock">-string_pattern         User{Inc:1}_Pwd{Inc:100}               \</p>
        <p class="CodeBlock">]</p>
        <p class="CodeBlock">if {[keylget mv_custom_distribution status] != $::SUCCESS} {</p>
        <p class="CodeBlock">puts "FAIL - [info script] - $mv_custom_distribution"</p>
        <p class="CodeBlock">return $FAILED</p>
        <p class="CodeBlock">}</p>
        <p class="CodeBlock">set mv_cd_handle [keylget mv_custom_distribution multivalue_handle]</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">set l2tp_LAC_status [::ixiangpf::l2tp_config                                \</p>
        <p class="CodeBlock">-mode                               lac                             \</p>
        <p class="CodeBlock">-handle                             $ethernet_1_handle              \</p>
        <p class="CodeBlock">-action                             create                          \</p>
        <p class="CodeBlock">-sessions_per_tunnel                $sessions_per_tunnel            \</p>
        <p class="CodeBlock">-num_tunnels                        $tunnel_count                   \</p>
        <p class="CodeBlock">-l2tp_dst_addr                      12.70.1.1                       \</p>
        <p class="CodeBlock">-l2tp_dst_step                      0.0.0.1                         \</p>
        <p class="CodeBlock">-l2tp_src_gw                		0.0.0.0                			\</p>
        <p class="CodeBlock">-l2tp_src_prefix_len            	16                    			\</p>
        <p class="CodeBlock">-l2tp_src_addr                      12.70.0.1                       \</p>
        <p class="CodeBlock">-l2tp_src_count                     $tunnel_count                   \</p>
        <p class="CodeBlock">-l2tp_src_step                      0.0.0.1                         \</p>
        <p class="CodeBlock">-domain_group_map                   $mv_cd_handle                   \</p>
        <p class="CodeBlock">-enable_term_req_timeout            0                               \</p>
        <p class="CodeBlock">-sequence_bit                                                       \</p>
        <p class="CodeBlock">-offset_bit                                                         \</p>
        <p class="CodeBlock">-length_bit                                                         \</p>
        <p class="CodeBlock">-tun_auth                                                           \</p>
        <p class="CodeBlock">-redial                                                             \</p>
        <p class="CodeBlock">-data_chksum                                                        \</p>
        <p class="CodeBlock">-ctrl_chksum                                                        \</p>
        <p class="CodeBlock">-hello_req                                                          \</p>
        <p class="CodeBlock">-avp_hide                                                           \</p>
        <p class="CodeBlock">-offset_byte                        89                              \</p>
        <p class="CodeBlock">-udp_src_port                       1600                            \</p>
        <p class="CodeBlock">-udp_dst_port                       1800                            \</p>
        <p class="CodeBlock">-redial_timeout                     13                              \</p>
        <p class="CodeBlock">-rws                                15                              \</p>
        <p class="CodeBlock">-offset_len                         16                              \</p>
        <p class="CodeBlock">-max_ctrl_timeout                   9                               \</p>
        <p class="CodeBlock">-redial_max                         2048                            \</p>
        <p class="CodeBlock">-hostname                           "ixia_dut"                      \</p>
        <p class="CodeBlock">-secret                             "ixia_secret"                   \</p>
        <p class="CodeBlock">-hostname_wc                        1                               \</p>
        <p class="CodeBlock">-secret_wc                          1                               \</p>
        <p class="CodeBlock">-wildcard_bang_start                1                               \</p>
        <p class="CodeBlock">-wildcard_bang_end                  $sessions_per_tunnel            \</p>
        <p class="CodeBlock">-wildcard_dollar_start              1                               \</p>
        <p class="CodeBlock">-wildcard_dollar_end                $tunnel_count                   \</p>
        <p class="CodeBlock">-username                           "ixia_#_?"                      \</p>
        <p class="CodeBlock">-password                           "pwd_#_?"                       \</p>
        <p class="CodeBlock">-username_wc                        1                               \</p>
        <p class="CodeBlock">-password_wc                        1                               \</p>
        <p class="CodeBlock">-wildcard_pound_start               1                               \</p>
        <p class="CodeBlock">-wildcard_pound_end                 $tunnel_count                   \</p>
        <p class="CodeBlock">-wildcard_question_start            1                               \</p>
        <p class="CodeBlock">-wildcard_question_end              $sessions_per_tunnel            \</p>
        <p class="CodeBlock">-init_ctrl_timeout                  6                               \</p>
        <p class="CodeBlock">-hello_interval                     101                             \</p>
        <p class="CodeBlock">-framing_capability                 async                           \</p>
        <p class="CodeBlock">-ctrl_retries                       11                              \</p>
        <p class="CodeBlock">-bearer_type                        digital                         \</p>
        <p class="CodeBlock">-bearer_capability                  digital                         \</p>
        <p class="CodeBlock">-enable_mru_negotiation             1                               \</p>
        <p class="CodeBlock">-desired_mru_rate                   1501                            \</p>
        <p class="CodeBlock">-lcp_enable_accm                    1                               \</p>
        <p class="CodeBlock">-lcp_accm                           1501                            \</p>
        <p class="CodeBlock">-max_auth_req                       15                              \</p>
        <p class="CodeBlock">-auth_req_timeout                   7                               \</p>
        <p class="CodeBlock">-auth_mode                          pap_or_chap                     \</p>
        <p class="CodeBlock">-chap_name                          ixia_chap_name                  \</p>
        <p class="CodeBlock">-chap_secret                        ixia_chap_secret                \</p>
        <p class="CodeBlock">-client_dns_options                 request_primary_and_secondary   \</p>
        <p class="CodeBlock">-ppp_client_ip                      3.3.3.3                         \</p>
        <p class="CodeBlock">-ppp_client_step                    0.0.0.2                         \</p>
        <p class="CodeBlock">-ppp_client_iid                     00:44:44:44:00:00:00:01         \</p>
        <p class="CodeBlock">-client_ipv4_ncp_configuration      request                         \</p>
        <p class="CodeBlock">-client_netmask                     255.255.0.0                     \</p>
        <p class="CodeBlock">-client_netmask_options             request_specific_netmask        \</p>
        <p class="CodeBlock">-client_ipv6_ncp_configuration      request                         \</p>
        <p class="CodeBlock">-client_wins_options                request_primaryandsecondary_wins\</p>
        <p class="CodeBlock">-client_wins_primary_address        88.88.88.88                     \</p>
        <p class="CodeBlock">-client_wins_secondary_address      99.99.99.99                     \</p>
        <p class="CodeBlock">-enable_domain_groups               1                               \</p>
        <p class="CodeBlock">-echo_req                           1                               \</p>
        <p class="CodeBlock">-echo_req_interval                  9                               \</p>
        <p class="CodeBlock">-echo_rsp                           1                               \</p>
        <p class="CodeBlock">-max_configure_req                  8                               \</p>
        <p class="CodeBlock">-max_terminate_req                  6                               \</p>
        <p class="CodeBlock">-config_req_timeout                 25                              \</p>
        <p class="CodeBlock">-protocol_name                      "Ixia LAC"                      \</p>
        <p class="CodeBlock">-max_ipcp_req                       12                              \</p>
        <p class="CodeBlock">-ipcp_req_timeout                   13                              \</p>
        <p class="CodeBlock">-ip_cp                              dual_stack                      \</p>
        <p class="CodeBlock">-client_primary_dns_address         5.5.5.5                         \</p>
        <p class="CodeBlock">-client_secondary_dns_address       6.6.6.6                         \</p>
        <p class="CodeBlock">]</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">if {[keylget l2tp_LAC_status status] != $::SUCCESS} {</p>
        <p class="CodeBlock">puts "FAIL - [info script] - $l2tp_LAC_status"</p>
        <p class="CodeBlock">return $FAILED</p>
        <p class="CodeBlock">}</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">set l2tp_LAC_handle [keylget l2tp_LAC_status lac_handle]</p>
        <p class="CodeBlock">set pppoxclient_handle [keylget l2tp_LAC_status pppox_client_handle]</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock"># ########################### DHCPv6 Client ###########################</p>
        <p class="CodeBlock">puts ""</p>
        <p class="CodeBlock">puts "Adding DHCPv6 Client 1 layer..."</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">set dhcp_config_for_lac [::ixiangpf::emulation_dhcp_group_config    \</p>
        <p class="CodeBlock">-handle                      	$pppoxclient_handle         \</p>
        <p class="CodeBlock">-mode                    		create        \</p>
        <p class="CodeBlock">-dhcp_range_ip_type             ipv6        \</p>
        <p class="CodeBlock">-dhcp6_range_duid_enterprise_id 15        \</p>
        <p class="CodeBlock">-dhcp6_range_duid_type          duid_en        \</p>
        <p class="CodeBlock">-dhcp6_range_duid_vendor_id     20        \</p>
        <p class="CodeBlock">-dhcp6_range_duid_vendor_id_increment    2        \</p>
        <p class="CodeBlock">-dhcp_range_renew_timer         10        \</p>
        <p class="CodeBlock">-dhcp6_use_pd_global_address    1        \</p>
        <p class="CodeBlock">-protocol_name                	"Ixia DHCPv6"    \</p>
        <p class="CodeBlock">-dhcp6_range_ia_type        	iana_iapd        \</p>
        <p class="CodeBlock">-dhcp6_range_ia_t2            	40000        \</p>
        <p class="CodeBlock">-dhcp6_range_ia_t1            	30000        \</p>
        <p class="CodeBlock">-dhcp6_range_ia_id_increment    2        \</p>
        <p class="CodeBlock">-dhcp6_range_ia_id            	20        \</p>
        <p class="CodeBlock">]</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">if {[keylget dhcp_config_for_lac status] != $::SUCCESS} {</p>
        <p class="CodeBlock">puts "FAIL - [info script] - $dhcp_config_for_lac"</p>
        <p class="CodeBlock">return $FAILED</p>
        <p class="CodeBlock">}</p>
        <p class="CodeBlock">set dhcpclient_1_handle [keylget dhcp_config_for_lac dhcpv6client_handle]</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">set topology_2_status [::ixiangpf::topology_config     \</p>
        <p class="CodeBlock">-topology_name      {Topology 2}            \</p>
        <p class="CodeBlock">-port_handle        $port_2          \</p>
        <p class="CodeBlock">]</p>
        <p class="CodeBlock">if {[keylget topology_2_status status] != $::SUCCESS} {</p>
        <p class="CodeBlock">puts "FAIL - [info script] - $topology_2_status"</p>
        <p class="CodeBlock">return $FAILED</p>
        <p class="CodeBlock">}</p>
        <p class="CodeBlock">set topology_2_handle [keylget topology_2_status topology_handle]</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">puts ""</p>
        <p class="CodeBlock">puts "Creating DG 3..."</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">set device_group_3_status [::ixiangpf::topology_config \</p>
        <p class="CodeBlock">-topology_handle              $topology_2_handle      \</p>
        <p class="CodeBlock">-device_group_name            {Device Group 3}        \</p>
        <p class="CodeBlock">-device_group_multiplier      10                       \</p>
        <p class="CodeBlock">-device_group_enabled         1                       \</p>
        <p class="CodeBlock">]</p>
        <p class="CodeBlock">if {[keylget device_group_3_status status] != $::SUCCESS} {</p>
        <p class="CodeBlock">puts "FAIL - [info script] - $device_group_3_status"</p>
        <p class="CodeBlock">return $FAILED</p>
        <p class="CodeBlock">}</p>
        <p class="CodeBlock">set deviceGroup_3_handle [keylget device_group_3_status device_group_handle]</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">set tunnel_count        5</p>
        <p class="CodeBlock">set sessions_per_tunnel 50</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">set l2tp_LNS_status [::ixiangpf::l2tp_config                                \</p>
        <p class="CodeBlock">-mode                               lns                             \</p>
        <p class="CodeBlock">-handle                             $deviceGroup_3_handle           \</p>
        <p class="CodeBlock">-protocol_name                {L2TP Network Server}        \</p>
        <p class="CodeBlock">-action                             create                          \</p>
        <p class="CodeBlock">-num_tunnels                        $tunnel_count                   \</p>
        <p class="CodeBlock">-sessions_per_tunnel                $sessions_per_tunnel            \</p>
        <p class="CodeBlock">-l2tp_src_addr                      12.70.1.1                       \</p>
        <p class="CodeBlock">-l2tp_src_count                     $tunnel_count                   \</p>
        <p class="CodeBlock">-l2tp_src_gw                  0.0.0.0                \</p>
        <p class="CodeBlock">-l2tp_src_step                      0.0.0.1                         \</p>
        <p class="CodeBlock">-l2tp_src_prefix_len            16                    \</p>
        <p class="CodeBlock">-enable_term_req_timeout            0                               \</p>
        <p class="CodeBlock">-username                           ixia_lns_user                   \</p>
        <p class="CodeBlock">-password                           ixia_lns_pass                   \</p>
        <p class="CodeBlock">-chap_name                          ixia_chap_name                  \</p>
        <p class="CodeBlock">-chap_secret                        ixia_chap_secret                \</p>
        <p class="CodeBlock">-enable_domain_groups               1                               \</p>
        <p class="CodeBlock">-domain_group_map                   $mv_cd_handle                   \</p>
        <p class="CodeBlock">-sequence_bit                                                       \</p>
        <p class="CodeBlock">-offset_bit                                                         \</p>
        <p class="CodeBlock">-length_bit                                                         \</p>
        <p class="CodeBlock">-tun_auth                                                           \</p>
        <p class="CodeBlock">-redial                                                             \</p>
        <p class="CodeBlock">-data_chksum                                                        \</p>
        <p class="CodeBlock">-ctrl_chksum                                                        \</p>
        <p class="CodeBlock">-hello_req                                                          \</p>
        <p class="CodeBlock">-avp_hide                                                           \</p>
        <p class="CodeBlock">-offset_byte                        89                              \</p>
        <p class="CodeBlock">-udp_src_port                       1800                            \</p>
        <p class="CodeBlock">-udp_dst_port                       1600                            \</p>
        <p class="CodeBlock">-redial_timeout                     13                              \</p>
        <p class="CodeBlock">-rws                                15                              \</p>
        <p class="CodeBlock">-offset_len                         16                              \</p>
        <p class="CodeBlock">-max_ctrl_timeout                   9                               \</p>
        <p class="CodeBlock">-redial_max                         2048                            \</p>
        <p class="CodeBlock">-secret                             ixia_secret                     \</p>
        <p class="CodeBlock">-hostname                           ixia_dut                        \</p>
        <p class="CodeBlock">-init_ctrl_timeout                  6                               \</p>
        <p class="CodeBlock">-hello_interval                     101                             \</p>
        <p class="CodeBlock">-framing_capability                 async                           \</p>
        <p class="CodeBlock">-ctrl_retries                       11                              \</p>
        <p class="CodeBlock">-bearer_type                        digital                         \</p>
        <p class="CodeBlock">-bearer_capability                  digital                         \</p>
        <p class="CodeBlock">-accept_any_auth_value              1                               \</p>
        <p class="CodeBlock">-max_auth_req                       121                             \</p>
        <p class="CodeBlock">-auth_req_timeout                   132                             \</p>
        <p class="CodeBlock">-auth_mode                          pap_or_chap                     \</p>
        <p class="CodeBlock">-ppp_client_iid                     00:55:55:55:00:00:00:01         \</p>
        <p class="CodeBlock">-ppp_client_iid_step                00:00:00:00:00:00:00:01         \</p>
        <p class="CodeBlock">-ppp_client_ip                      22.22.22.1                      \</p>
        <p class="CodeBlock">-ppp_client_step                    0.0.0.3                         \</p>
        <p class="CodeBlock">-dns_server_list                    100:0:0:1:0:0:0:0               \</p>
        <p class="CodeBlock">-echo_req_interval                  17                              \</p>
        <p class="CodeBlock">-send_dns_options                   1                               \</p>
        <p class="CodeBlock">-echo_req                           1                               \</p>
        <p class="CodeBlock">-echo_rsp                           1                               \</p>
        <p class="CodeBlock">-ipv6_pool_addr_prefix_len          90                              \</p>
        <p class="CodeBlock">-ipv6_pool_prefix                   1:1:1:1:1:1:1:1                 \</p>
        <p class="CodeBlock">-ipv6_pool_prefix_len               72                              \</p>
        <p class="CodeBlock">-lcp_accm                           234                             \</p>
        <p class="CodeBlock">-lcp_enable_accm                    1                               \</p>
        <p class="CodeBlock">-max_configure_req                  111                             \</p>
        <p class="CodeBlock">-max_terminate_req                  120                             \</p>
        <p class="CodeBlock">-config_req_timeout                 55                              \</p>
        <p class="CodeBlock">-enable_mru_negotiation             1                               \</p>
        <p class="CodeBlock">-desired_mru_rate                   1501                            \</p>
        <p class="CodeBlock">-max_ipcp_req                       14                              \</p>
        <p class="CodeBlock">-ipcp_req_timeout                   15                              \</p>
        <p class="CodeBlock">-ip_cp                              dual_stack                      \</p>
        <p class="CodeBlock">-ppp_server_iid                     00:66:66:66:00:00:00:01         \</p>
        <p class="CodeBlock">-ppp_server_ip                      45.45.45.1                      \</p>
        <p class="CodeBlock">-server_dns_options                 supply_primary_and_secondary    \</p>
        <p class="CodeBlock">-ppp_local_iid_step                 3                               \</p>
        <p class="CodeBlock">-ppp_local_ip_step                  0.0.15.15                       \</p>
        <p class="CodeBlock">-server_ipv4_ncp_configuration      clientmay                       \</p>
        <p class="CodeBlock">-server_netmask                     255.255.255.128                 \</p>
        <p class="CodeBlock">-server_netmask_options             supply_netmask                  \</p>
        <p class="CodeBlock">-server_primary_dns_address         12.12.12.1                      \</p>
        <p class="CodeBlock">-server_secondary_dns_address       13.13.13.1                      \</p>
        <p class="CodeBlock">-server_ipv6_ncp_configuration      clientmay                       \</p>
        <p class="CodeBlock">-server_wins_options                supply_primary_and_secondary    \</p>
        <p class="CodeBlock">-server_wins_primary_address        21.21.21.1                      \</p>
        <p class="CodeBlock">-server_wins_secondary_address      31.31.31.1                      \</p>
        <p class="CodeBlock">]</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">set pppoxserver_handle [keylget l2tp_LNS_status pppox_server_handle]</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">set dhcp_server_config_for_lns [::ixiangpf::emulation_dhcp_server_config    \</p>
        <p class="CodeBlock">-handle                             $pppoxserver_handle            \</p>
        <p class="CodeBlock">-mode                    create                \</p>
        <p class="CodeBlock">-dhcp6_ia_type                      iana_iapd                \</p>
        <p class="CodeBlock">-ip_dns1                            11:0:0:0:0:0:0:1            \</p>
        <p class="CodeBlock">-ip_dns2                            22:0:0:0:0:0:0:1            \</p>
        <p class="CodeBlock">-ip_version                         6                    \</p>
        <p class="CodeBlock">-ipaddress_count                    1                    \</p>
        <p class="CodeBlock">-ipaddress_pool                     5:a::1                \</p>
        <p class="CodeBlock">-ipaddress_pool_prefix_length       64                    \</p>
        <p class="CodeBlock">-lease_time                         86400                \</p>
        <p class="CodeBlock">-protocol_name                      {Ixia DHCPv6 Server}        \</p>
        <p class="CodeBlock">-use_rapid_commit                   0                    \</p>
        <p class="CodeBlock">-pool_address_increment             0:0:0:0:0:0:0:1            \</p>
        <p class="CodeBlock">-start_pool_prefix                  55:aa::                \</p>
        <p class="CodeBlock">-pool_prefix_increment              1:0:0:0:0:0:0:0            \</p>
        <p class="CodeBlock">-pool_prefix_size                   1                    \</p>
        <p class="CodeBlock">-prefix_length                      64                    \</p>
        <p class="CodeBlock">-custom_renew_time                  34560                              \</p>
        <p class="CodeBlock">-custom_rebind_time                 55296                              \</p>
        <p class="CodeBlock">-use_custom_times                   1                                  \</p>
        <p class="CodeBlock">]</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">if {[keylget dhcp_server_config_for_lns status] != $::SUCCESS} {</p>
        <p class="CodeBlock">puts "FAIL - [info script] - $dhcp_server_config_for_lns"</p>
        <p class="CodeBlock">return $FAILED</p>
        <p class="CodeBlock">}</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">set dhcp_server_handle [keylget dhcp_server_config_for_lns dhcpv6server_handle]</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">puts ""</p>
        <p class="CodeBlock">puts "Starting protocols ..."</p>
        <p class="CodeBlock">puts ""</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">set test_control [::ixiangpf::test_control    \</p>
        <p class="CodeBlock">-action start_all_protocols        \</p>
        <p class="CodeBlock">]</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">sleep 10</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock"># ###################### DHCPv6 over PPPoX Client Statistics #####################</p>
        <p class="CodeBlock">puts ""</p>
        <p class="CodeBlock">puts "Retriving statistics..."</p>
        <p class="CodeBlock">puts ""</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">puts "DHCP Statistics..."</p>
        <p class="CodeBlock">puts ""</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">set dhcp_stats_0 [::ixiangpf::emulation_dhcp_stats      \</p>
        <p class="CodeBlock">-port_handle   $port_1                            \</p>
        <p class="CodeBlock">-mode          aggregate_stats                \</p>
        <p class="CodeBlock">-dhcp_version    dhcp6                    \</p>
        <p class="CodeBlock">-execution_timeout 300                           \</p>
        <p class="CodeBlock">]</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">if {[keylget dhcp_stats_0 status] != $::SUCCESS} {</p>
        <p class="CodeBlock">puts "FAIL - [info script] - $dhcp_stats_0"</p>
        <p class="CodeBlock">return $FAILED</p>
        <p class="CodeBlock">}</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">set dhcp_stats_0 [::ixiangpf::emulation_dhcp_stats      \</p>
        <p class="CodeBlock">-handle   $dhcpclient_1_handle                    \</p>
        <p class="CodeBlock">-mode          aggregate_stats                \</p>
        <p class="CodeBlock">-dhcp_version    dhcp6                    \</p>
        <p class="CodeBlock">-execution_timeout 300                               \</p>
        <p class="CodeBlock">]</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">if {[keylget dhcp_stats_0 status] != $::SUCCESS} {</p>
        <p class="CodeBlock">puts "FAIL - [info script] - $dhcp_stats_0"</p>
        <p class="CodeBlock">return $FAILED</p>
        <p class="CodeBlock">}</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">set dhcp_stats_0 [::ixiangpf::emulation_dhcp_stats  \</p>
        <p class="CodeBlock">-handle   $dhcpclient_1_handle                \</p>
        <p class="CodeBlock">-mode          session            \</p>
        <p class="CodeBlock">-dhcp_version    dhcp6            \</p>
        <p class="CodeBlock">-execution_timeout 300                       \</p>
        <p class="CodeBlock">]</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">if {[keylget dhcp_stats_0 status] != $::SUCCESS} {</p>
        <p class="CodeBlock">puts "FAIL - [info script] - $dhcp_stats_0"</p>
        <p class="CodeBlock">return $FAILED</p>
        <p class="CodeBlock">}</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">puts ""</p>
        <p class="CodeBlock">puts "LAC Statistics..."</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">set l2tp_stats2 [::ixiangpf::l2tp_stats          \</p>
        <p class="CodeBlock">-port_handle   $port_1            \</p>
        <p class="CodeBlock">-mode     aggregate            \</p>
        <p class="CodeBlock">-execution_timeout 300                   \</p>
        <p class="CodeBlock">]</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">if {[keylget l2tp_stats2 status] != $::SUCCESS} {</p>
        <p class="CodeBlock">puts "FAIL - [info script] - $l2tp_stats2"</p>
        <p class="CodeBlock">return $FAILED</p>
        <p class="CodeBlock">}</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">set l2tp_stats1 [::ixiangpf::l2tp_stats          \</p>
        <p class="CodeBlock">-mode              tunnel        \</p>
        <p class="CodeBlock">-handle          $l2tp_LAC_handle    \</p>
        <p class="CodeBlock">-execution_timeout   300                   \</p>
        <p class="CodeBlock">]</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">if {[keylget l2tp_stats1 status] != $::SUCCESS} {</p>
        <p class="CodeBlock">puts "FAIL - [info script] - $l2tp_stats1"</p>
        <p class="CodeBlock">return $FAILED</p>
        <p class="CodeBlock">}</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">puts ""</p>
        <p class="CodeBlock">puts "Verifying session info for DHCPv6 over PPPoX Client..."</p>
        <p class="CodeBlock">puts ""</p>
        <p class="CodeBlock">set ppp_client_session_info1 [::ixiangpf::protocol_info     \</p>
        <p class="CodeBlock">-handle              $pppoxclient_handle        \</p>
        <p class="CodeBlock">-mode                handles            \</p>
        <p class="CodeBlock">]</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">sleep 5</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">set ppp_client_session_info2 [::ixiangpf::protocol_info     \</p>
        <p class="CodeBlock">-handle              $pppoxclient_handle        \</p>
        <p class="CodeBlock">-mode                aggregate        \</p>
        <p class="CodeBlock">]</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">sleep 5</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">set dhcp_client_session_info1 [::ixiangpf::protocol_info     \</p>
        <p class="CodeBlock">-handle              $dhcpclient_1_handle        \</p>
        <p class="CodeBlock">-mode                handles            \</p>
        <p class="CodeBlock">]</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">sleep 5</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">set dhcp_client_session_info2 [::ixiangpf::protocol_info     \</p>
        <p class="CodeBlock">-handle              $dhcpclient_1_handle        \</p>
        <p class="CodeBlock">-mode                aggregate        \</p>
        <p class="CodeBlock">]</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">puts ""</p>
        <p class="CodeBlock">puts "Stopping protocols ..."</p>
        <p class="CodeBlock">puts ""</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">set test_control [::ixiangpf::test_control    \</p>
        <p class="CodeBlock">-action stop_all_protocols        \</p>
        <p class="CodeBlock">]</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">sleep 10</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">puts ""</p>
        <p class="CodeBlock">puts "Clear topologies..."</p>
        <p class="CodeBlock">sleep 5</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">set topology_1_status [::ixiangpf::topology_config     \</p>
        <p class="CodeBlock">-mode               destroy                     \</p>
        <p class="CodeBlock">-port_handle        $port_1              \</p>
        <p class="CodeBlock">-topology_handle    $topology_1_handle            \</p>
        <p class="CodeBlock">]</p>
        <p class="CodeBlock">if {[keylget topology_1_status status] != $::SUCCESS} {</p>
        <p class="CodeBlock">puts "FAIL - [info script] - $topology_1_status"</p>
        <p class="CodeBlock">return $FAILED</p>
        <p class="CodeBlock">}</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">set topology_2_status [::ixiangpf::topology_config     \</p>
        <p class="CodeBlock">-mode               destroy                     \</p>
        <p class="CodeBlock">-port_handle        $port_2              \</p>
        <p class="CodeBlock">-topology_handle    $topology_2_handle            \</p>
        <p class="CodeBlock">]</p>
        <p class="CodeBlock">if {[keylget topology_2_status status] != $::SUCCESS} {</p>
        <p class="CodeBlock">puts "FAIL - [info script] - $topology_2_status"</p>
        <p class="CodeBlock">return $FAILED</p>
        <p class="CodeBlock">}</p>
        <p class="CodeBlock">&#160;</p>
        <p class="CodeBlock">puts ""</p>
        <p class="CodeBlock">puts "!!! TEST PASSED !!!"</p>
        <p class="CodeBlock">return $PASSED</p>
    </body>
</html>